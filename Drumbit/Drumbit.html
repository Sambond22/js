<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="Drumbit.css">
</head>
<body>
    
    <div class="wrapper bgr1">
        <div class="tone">
            <div data-code="65" class="voice">
               <kbd>a</kbd> Clap</div>
            <div data-code="83" class="voice">
                <kbd>s</kbd> Hihat</div>
            <div data-code="68" class="voice"> 
                <kbd>d</kbd> Kick</div>
            <div data-code="70" class="voice">
                <kbd>f</kbd> Openhat</div>
            <div data-code="74" class="voice">
                <kbd>j</kbd> Boom</div>
            <div data-code="75" class="voice">
                <kbd>k</kbd> Ride</div>
            <div data-code="76" class="voice">
                <kbd>l</kbd> Snare</div>
            <div data-code="186" class="voice">
                <kbd>;</kbd> Tom</div>
            <div data-code="222"  class="voice">
                <kbd>'</kbd> Tink</div>
        </div>

        <audio data-code="65" src="../js/sound/01 - JavaScript Drum Kit_sounds_clap.wav"></audio>
        <audio data-code="83" src="../js/sound/01 - JavaScript Drum Kit_sounds_hihat.wav"></audio>
        <audio data-code="68" src="../js/sound/01 - JavaScript Drum Kit_sounds_kick.wav"></audio>
        <audio data-code="70" src="../js/sound/01 - JavaScript Drum Kit_sounds_openhat.wav"></audio>
        <audio data-code="74" src="../js/sound/01 - JavaScript Drum Kit_sounds_boom.wav"></audio>
        <audio data-code="75" src="../js/sound/01 - JavaScript Drum Kit_sounds_ride.wav"></audio>
        <audio data-code="76" src="../js/sound/01 - JavaScript Drum Kit_sounds_snare.wav"></audio>
        <audio data-code="186" src="../js/sound/01 - JavaScript Drum Kit_sounds_tom.wav"></audio>
        <audio data-code="222" src="../js/sound/01 - JavaScript Drum Kit_sounds_tink.wav"></audio>

    </div>
    <script>
 
// below commented code not work properly  so we add set timeout function
// function trasition(e){
//     if (e.propertyName !== 'transform') return;
//     e.classList.remove('playing');
// }
function playSound(e) {
    const audio = document.querySelector(`audio[data-code="${e.keyCode}"]`);
    const key = document.querySelector(`div[data-code="${e.keyCode}"]`);
    if (!audio) return;

    key.classList.add('playing');
    
    audio.currentTime = 0;  //starting from zero
    audio.play();

    setTimeout(()=>key.classList.remove('playing'),100);    
  }
document.addEventListener('keydown', playSound);

// document.addEventListener('transitionend',trasition);
    </script>
</body>
</html>